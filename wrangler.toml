name = "soulframe-atlas"
compatibility_date = "2025-12-09"

[pages]
# This tells Pages to serve the static files from the root of your repo
build_output_dir = "."
# This is the crucial line: it tells Pages where to find your functions
build_output_functions_dir = "/functions"

# Environment variables (set these via Wrangler or Cloudflare dashboard)
[env.production]
# vars are non-sensitive environment variables
vars = { 
  ENABLE_CLOUDFLARE_ACCESS_CHECK = "false",
  CLOUDFLARE_ACCESS_HEADER_NAME = "CF-Access-Jwt-Assertion"
}

# Secrets (set via: wrangler secret put GITHUB_TOKEN)
# GITHUB_TOKEN - Personal access token with repo permissions

# For local development
[env.dev]
vars = { 
  ENABLE_CLOUDFLARE_ACCESS_CHECK = "false",
  CLOUDFLARE_ACCESS_HEADER_NAME = "CF-Access-Jwt-Assertion"
}

# Routes configuration example (update with your domain)
# [[routes]]
# pattern = "yourdomain.com/api/admin/*"
# zone_name = "yourdomain.com"
